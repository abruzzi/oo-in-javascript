<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>Object Oriented Programming in JavaScript</title>

		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<link rel="stylesheet" href="css/reveal.min.css">
		<link rel="stylesheet" href="css/theme/default.css" id="theme">

		<!-- For syntax highlighting -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- If the query includes 'print-pdf', include the PDF print sheet -->
		<script>
			if( window.location.search.match( /print-pdf/gi ) ) {
				var link = document.createElement( 'link' );
				link.rel = 'stylesheet';
				link.type = 'text/css';
				link.href = 'css/print/pdf.css';
				document.getElementsByTagName( 'head' )[0].appendChild( link );
			}
		</script>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>

	<body>

		<div class="reveal">

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">
				<section>
					<h1>OO in JavaScript</h1>
					<h3>A very different way</h3>
					<p>
						<small>Created by <a href="http://icodeit.org">Juntao Qiu</a> / <a href="#">juntao.qiu</a>, </small>
						<small><a href="#">Bian Rui</a> / <a href="#">psychebb</a></small>
					</p>
				</section>
	
				<section  data-background="#0e90d2">
					<section>
						<h2>Firstly, you should have an <span style="color:#ff5e99">object</span></h2>
					</section>
					<section>
						<h2>首先, 你得有个<span style="color:#ff5e99">对象</span></h2>
					</section>					
				</section>				
				

				<section>
					<section data-background="#4d7e65">
						<h2>Create An Object</h2>
						<pre><code data-item>
var obj = new Object();
						</code></pre>
					</section>
					<section data-background="#4d7e65">
						<h2>Or simply</h2>
						<pre><code data-item>
var obj = {};
						</code></pre>
					</section>
					<section data-background="#4d7e65">
						<h2>Object as Container</h2>
						<pre><code data-item>
{
	name: "juntao",
	skills: ["JavaScript", "Ruby"]
}
						</code></pre>
					</section>
				</section>

				<!-- 重用 -->
				<section>
					<section data-background="#8c4738">
						<h2><span style="color: lightgreen">Prototype</span> based language</h2>
					</section>

					<section data-background="#8c4738">
						<h3>prototype Chain</h3>
						<a href="#" class="image navigate-down">
							<img src="chain-resized.jpg" alt="chain">
						</a>										
					</section>
					<section data-background="#8c4738">
						<h2>Constructor</h2>
						<pre><code data-item>
var LineItem = function(name, price, amount, unit) {
	this.name = name;
	this.price = price;
	this.amount = amount;
	this.unit = unit;	
}
						</code></pre>
					</section>
					<section data-background="#8c4738">
						<h2>Or</h2>
						<pre><code data-item>
function LineItem(name, price, amount, unit) {
	this.name = name;
	this.price = price;
	this.amount = amount;
	this.unit = unit;
}
						</code></pre>
					</section>
					<section data-background="#8c4738">
						<h2>Methods</h2>
						<pre><code data-item>
LineItem.prototype.totalPrice = function() {
	return this.price * this.amount;	
}

LineItem.prototype.format = function() {
	return "名称：" + this.name + 
	"，数量："+this.amount + this.unit + 
	"，单价："+this.price.toFixed(2)+"（元）"+
	"，小计："+ this.totalPrice()+"（元）";
}			
						</code></pre>
					</section>

					<section data-background="#8c4738">
						<h2>Create an Object</h2>
						<pre><code data-item>
var apple = new LineItem("苹果", 15.00, 2, "市斤");

console.log(apple.totalPrice());
//30 

console.log(apple.format());
//名称：苹果，数量：2市斤，单价：15.00（元），小计：30（元）
						</code></pre>
					</section>
					<section data-background="#8c4738">
						<h2>Create another</h2>
						<pre><code data-item>
var apple = new LineItem("苹果5s", 4680.00, 1, "台");

console.log(apple.totalPrice());
//4680

console.log(apple.format());
//名称：苹果5s，数量：1台，单价：4680.00（元），小计：4680（元）
						</code></pre>
					</section>

					<section data-background="#8c4738">
						<h2>It's all about <span style="color:#4099FF">reusable</span></h2>
					</section>
				</section>

				<!-- 建模 -->
				<section>
					<section data-background="#007777">
						<h3>Modeling</h3>
						<a href="#" class="image navigate-down">
							<img src="supermarket-resized.jpg" alt="modeling">
						</a>
					</section>

					<section data-background="#007777">
						<h3>Modeling</h3>
						<pre><code data-item>
var ShoppingCart = function() {
	this.collection = [];
}

ShoppingCart.prototype.add = function(item) {
	this.collection.push(item);
}

ShoppingCart.prototype.count = function() {
	return this.collection.length;
}
						</code></pre>
					</section>

					<section data-background="#007777">
						<h3>Modeling</h3>
						<pre><code data-item>
var myCart = new ShoppingCart();
myCart.add(apple);
myCart.add(apple);
myCart.add(apple);

console.log(myCart.count());
//看什么看？没见过一次买三个苹果5s的吗？
						</code></pre>
					</section>


					<section data-background="#007777">
						<h3>Modeling</h3>
						<a href="#" class="image navigate-down">
							<img src="without_data_model.jpg" alt="modeling">
						</a>
					</section>

					<section data-background="#007777">
						<h2>It's all about <span style="color:#ff5e99">reality</span></h2>
					</section>					
				</section>

				<section>
					<section data-background="#dd514c">
						<h2>Design by example</h2>
					</section>
					
					<section data-background="#dd514c">
						<a href="#" class="image navigate-down" >
							<img src="observer_pattern_resized.png" alt="observer model" style="background-color: #ffffff;">
						</a>
					</section>

					<section data-background="#dd514c">
						<h2>Observer pattern - interface</h2>
						<pre><code data-item>
function Observer() {
}

Observer.prototype.update = function() {
	throw new Error("not implemented");
}
						</code></pre>						
					</section>

					<section data-background="#dd514c">
						<h2>Observer pattern - implementation</h2>
						<pre><code data-item>
var bbs = Object.create(Observer.prototype);
bbs.update = function(data) {
	console.log(data);
}
						</code></pre>
					</section>

					<section data-background="#dd514c">
						<h2>Observer pattern - Subject</h2>
						<pre><code data-item>
var Subject = function() {
	this.observers = [];
}

Subject.prototype.addObserver = function(observer) {
	this.observers.push(observer);
}

Subject.prototype.notify = function(data) {
	this.observers.forEach(function(observer) {
		observer.update(data);
	});
}	
						</code></pre>
					</section>

					<section data-background="#dd514c">
						<h2>Observer pattern - usage</h2>
						<pre><code data-item>
var weather = new Subject();

weather.addObserver(bbs);

weather.notify("Cloudy in the morning");
						</code></pre>
					</section>	


					<section data-background="#dd514c">
						<h2>Observer pattern - usage</h2>
						<pre><code data-item>
var alwayson = Object.create(Observer.prototype);
alwayson.update = function(data) {
	alert(data);
}
						</code></pre>
					</section>	

					<section data-background="#dd514c">
						<h2>Observer pattern - usage</h2>
						<pre><code data-item>
var weather = new Subject();

weather.addObserver(bbs);
weather.addObserver(alwayson);

weather.notify("Cloudy in the morning");
						</code></pre>
					</section>	

				</section>

				<section>
					<section data-background="#339966">
						<h2><span style="color:gold;">high</span> cohesion, <span style="color:gold;">loose</span> coupling</h2>
					</section>
					<section data-background="#339966">
						<h2><span style="color:gold;">Group</span> realted stuff together</h2>
					</section>
					<section data-background="#339966">
						<h2>Trust other objects</h2>
					</section>
				</section>

				<section>
					<section data-background="#f28d20">
						<h2>solid</h2>
					</section>
					<section data-background="#f28d20">
						<h2>single responsbility</h2>
						<a href="#" class="image navigate-down">
							<img src="god-class.jpg" alt="god-class">
						</a>
					</section>
					<section data-background="#f28d20">
						<h2>single responsbility</h2>
						<pre>
							<code data-item>
function getPrice() {	
	function getLineItemrice(){}

	function getSalesPrice(){}

	function getTotalPrice(){}

	function getPrintPrice(){}
}
							</code>
						</pre>
					</section><section data-background="#f28d20">
						<h2>never be more than <span style="color:#306199">one reason </span>for a class to change</h2>
						
					</section>
					<section data-background="#f28d20">
						<h2>open/closed</h2>
						<pre>
							<code data-item>
function getSalesPrice() {	
	if(promotion.type == 'BUY_TWO_GET_ONE_FREE') {
		//..
	}
	if(promotion.type == '50_PERCENT_OFF') {
		//..
	}
}
							</code>
						</pre>
					</section>
					<section data-background="#FF9900">
						<h2>liskov substitution</span></h2>
					</section>
					<section data-background="#FF9900">
						<h2>interface segregation</span></h2>
					</section>
					<section data-background="#FF9900">
						<h2>dependency inversion</span></h2>
					</section>
					
				</section>

				<section>
					<h2>THE END</h2>
					<p>
						<small><a href="http://icodeit.org">http://github.com/abruzzi</a></small>
					</p>
				</section>

			</div>

		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.min.js"></script>

		<script>

			// Full list of configuration options available here:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,

				theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
				transition: Reveal.getQueryHash().transition || 'default', // default/cube/page/concave/zoom/linear/fade/none

				// Parallax scrolling
				// parallaxBackgroundImage: 'https://s3.amazonaws.com/hakim-static/reveal-js/reveal-parallax-1.jpg',
				// parallaxBackgroundSize: '2100px 900px',

				// Optional libraries used to extend on reveal.js
				dependencies: [
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: 'plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
					{ src: 'plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
				]
			});

		</script>

	</body>
</html>
